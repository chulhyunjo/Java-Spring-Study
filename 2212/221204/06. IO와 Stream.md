# I/O와 Stream

- I/O? : 데이터의 입력(input)과 출력(output)
- 데이터는 한쪽에서 주고 한쪽에서 받는 구조로 되어있음
  - 이때 입력과 출력의 끝단: 노드(Node)
  - 두 노드를 연결하고 데이터를 전송할 수 있는 개념: 스트림(Stream)
    - 물의 흐름이나 전기의 흐름과 같은 개념
  - 스트림은 단 방향으로만 통신이 가능하며 하나의 스트림으로 입력과 출력을 같이 처리할 수 없음



![image-20221204131142399](C:\Users\chaom\AppData\Roaming\Typora\typora-user-images\image-20221204131142399.png)



> InputStream의 주요 메서드

- read()
  - public abstract int read() throws IOException
    - byte하나를 읽어서 int로 반환한다. 더 이상 읽을 값이 없으면 -1을 리턴
  - public int read(byte b[]) throws IOException
    - 데이터를 읽어서 b를 채우고 읽은 바이트의 개수를 리턴.
    - 0이 리턴되면 더 이상 읽을 값이 없는 상황이다.
  - public int read(byte b[], int offset, int len) throws IOException
    - 최대 len만큼 데이터를 읽어서 b의 offset부터 b에 저장하고 읽은 바이트 개수를 리턴
- close()
  - 스트림을 종료해서 자원을 반납한다.



> file 복사

```java
package com.ssafy.live4.file;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

public class FileCopyTest {
	public static void main(String[] args) {
		String path = "C:\\Temp\\";
		
		String originFile = path + "ByeJava.txt"; // 얘를 InputStream 에 넣을꺼야
		String destFile = path + "복사본.txt"; // 얘를 OutputStream
		
		try(FileOutputStream fo = new FileOutputStream(destFile);
				FileInputStream fi = new FileInputStream(originFile)){
					
				byte[] buf = new byte[1024];
				int size = 0;
				while((size = fi.read(buf))>0) {
					fo.write(buf, 0, size);
				}
			
			} catch (FileNotFoundException e) {
				e.printStackTrace();
			} catch (IOException e) {
				e.printStackTrace();
			}
	}
}
```

