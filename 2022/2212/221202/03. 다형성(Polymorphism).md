# 03. 다형성(Polymorphism)

- 하나의 객체가 많은 형(타입)을 가질 수 있는 성질

- 상속 관계에 있을 때 **조상 클래스의 타입으로 자식 클래스 객체를 레퍼런스** 할 수 있다.



> 활용 예1- 다른 타입의 객체를 다루는 배열

- 배열의 특징 - 같은 타입의 데이터를 묶음으로 다룬다.
- 다형성으로 다른 타입의 데이터를 하나의 배열로 관리

```java
void beforPoly() {
    Person [] persons = new Person[10];
    persons[0] = new Person();
    SpiderMan [] spiderMans = new SpiderMan[10];
    spiderMans[0] = new SpiderMan();
}

void afterPoly() {
    Person [] persons = new Person[10];
    persons[0] = new Person();
    persons[1] = new SpiderMan();
}
```

- Object는 모든 클래스의 조상
  - Object의 배열은 어떤 타입의 객체라도 다 저장할 수 있음
- 자바의 자료 구조를 간단하게 처리할 수 있음



> 활용2 - 매개변수의 다형성

- 무언가를 출력하고 싶다
  - 메서드가 호출되기 위해서 메서드 이름과 파라미터가 맞아야한다
  - 조상을 파라미터로 처리하면 객체의 타입에 따라 메서드를 만들 필요가 없다.



> 참조형 객체의 형 변환

- 작은 집에서 큰 집으로 => 묵시적 케스팅
  - 자손 타입의 객체를 조상 타입으로 참조: 형변환 생략 가능
    - 왜냐면 조상의 모든 내용이 자식에 있기 때문에 걱정할 필요가 없다.
- 큰집(super)에서 작은 집 (child)으로 => 명시적 케스팅
  - 조상 타입을 자손 타입으로 참조: 형변환 생략 불가



- 조상을 무작정 자손으로 바꿀 수는 없다.

  - instanceof 연산자

    - 실제 메모리에 있는 객체가 특정 클래스 타입인지 boolean으로 리턴

    ```java
    Person person = new Person();
    
    if (person instanceof SpiderMan) {
        SpiderMan sman = (SpiderMan) person;
    }
    ```

    

> 참조 변수의 레벨에 따른 객체의 멤버 연결

- 상속 관계에서 객체의 **멤버 변수가 중복**될 때
  - 참조 변수의 타입에 따라 연결이 달라짐



- 상속 관계에서 객체의 **메서드가 중복**될 때(메서드가 override 되었을 때)
  - **무조건 자식 클래스의 메서드가 호출**됨 => virtual method invocation
  - 최대한 메모리에 생성된 실제 객체에 최적화 된 메서드가 동작한다.

